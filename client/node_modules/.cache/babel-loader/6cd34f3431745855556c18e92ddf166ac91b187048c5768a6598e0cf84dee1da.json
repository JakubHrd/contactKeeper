{"ast":null,"code":"import React,{useEffect,useState}from'react';import{TextField,Button,Container,Typography,Box}from'@mui/material';import{useNavigate}from'react-router-dom';import axios from'axios';import{useUser}from'../context/UserContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const[users,setUsers]=useState([]);const navigate=useNavigate();const{setUserName,setUserId}=useUser();const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState(null);const[emailError,setEmailError]=useState('');const[passwordError,setPasswordError]=useState('');const[passwordStrength,setPasswordStrength]=useState('');// Funkce pro kontrolu e-mailu\nconst validateEmail=value=>{const emailRegex=/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;if(!emailRegex.test(value)){setEmailError('Zadejte platnou e-mailovou adresu.');}else{setEmailError('');}};// Funkce pro kontrolu hesla\nconst checkPassword=value=>{const hasUpperCase=/[A-Z]/.test(value);const hasLowerCase=/[a-z]/.test(value);const hasNumber=/[0-9]/.test(value);const hasSpecialChar=/[!@#$%^&*]/.test(value);const strength=hasUpperCase+hasLowerCase+hasNumber+hasSpecialChar;if(strength===4){setPasswordStrength('Silné heslo');setPasswordError('');}else if(strength===3){setPasswordStrength('Středně silné heslo');setPasswordError('');}else{setPasswordStrength('Slabé heslo');setPasswordError('Heslo musí obsahovat velká i malá písmena, číslice a speciální znaky.');}};// Při změně e-mailu\nconst handleEmailChange=e=>{const value=e.target.value;setEmail(value);validateEmail(value);};// Při změně hesla\nconst handlePasswordChange=e=>{const value=e.target.value;setPassword(value);checkPassword(value);};const handleSubmit=async event=>{event.preventDefault();// Zkontrolovat, jestli jsou všechny validace úspěšné\nif(emailError||passwordError){setError('Prosím, opravte chyby před přihlášením.');return;}console.log('data',{email,password});try{const response=await axios.post('http://localhost:5000/api/auth/login',{email,password});console.log('response',{response,'response.data':response.data});setUserName(response.data.name);setUserId(response.data.userId);navigate('/dashboard');}catch(err){const errorMessage=err.response?err.response.data.message:\"Login failed\";setError(errorMessage);}};return/*#__PURE__*/_jsx(Container,{component:\"main\",maxWidth:\"xs\",children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexDirection:'column',alignItems:'center',mt:8,background:'linear-gradient(135deg, #f0f0f0, #faf5f5)',boxShadow:'0px 8px 20px rgba(0, 0, 0, 0.15)',borderRadius:'16px',padding:'30px',maxWidth:'400px',margin:'50px auto'},children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",sx:{mb:2},children:\"Sign In\"}),error&&/*#__PURE__*/_jsx(Typography,{color:\"error\",sx:{mb:2},children:error}),/*#__PURE__*/_jsxs(Box,{component:\"form\",noValidate:true,onSubmit:handleSubmit,sx:{width:'100%'},children:[/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,id:\"email\",label:\"Email Address\",name:\"email\",autoComplete:\"email\",autoFocus:true,value:email,onChange:handleEmailChange,error:!!emailError,helperText:emailError,sx:{backgroundColor:'#fff',borderRadius:'8px'}}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,name:\"password\",label:\"Password\",type:\"password\",id:\"password\",autoComplete:\"current-password\",value:password,onChange:handlePasswordChange,error:!!passwordError,helperText:passwordError||passwordStrength,sx:{backgroundColor:'#fff',borderRadius:'8px'}}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",sx:{mt:3,mb:2,backgroundColor:'#1e90ff',color:'#fff','&:hover':{backgroundColor:'#32cd32'}},children:\"Sign In\"}),/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"outlined\",sx:{mb:2,borderColor:'#1e90ff',color:'#6200ea','&:hover':{backgroundColor:'#f0f0f0',borderColor:'#32cd32',color:'#4500b5'}},href:\"/register\",children:\"Don't have an account? Register\"})]})]})});};export default Login;","map":{"version":3,"names":["React","useEffect","useState","TextField","Button","Container","Typography","Box","useNavigate","axios","useUser","jsx","_jsx","jsxs","_jsxs","Login","users","setUsers","navigate","setUserName","setUserId","email","setEmail","password","setPassword","error","setError","emailError","setEmailError","passwordError","setPasswordError","passwordStrength","setPasswordStrength","validateEmail","value","emailRegex","test","checkPassword","hasUpperCase","hasLowerCase","hasNumber","hasSpecialChar","strength","handleEmailChange","e","target","handlePasswordChange","handleSubmit","event","preventDefault","console","log","response","post","data","name","userId","err","errorMessage","message","component","maxWidth","children","sx","display","flexDirection","alignItems","mt","background","boxShadow","borderRadius","padding","margin","variant","mb","color","noValidate","onSubmit","width","required","fullWidth","id","label","autoComplete","autoFocus","onChange","helperText","backgroundColor","type","borderColor","href"],"sources":["C:/Users/jacko/Desktop/Osobní projekty/react/contactkeeper/client/src/pages/Login.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { TextField, Button, Container, Typography, Box } from '@mui/material';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { useUser } from '../context/UserContext';\r\n\r\nconst Login = () => {\r\n    const [users, setUsers] = useState([]);\r\n\r\n    const navigate = useNavigate();\r\n    const { setUserName,setUserId  } = useUser();\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [error, setError] = useState(null);\r\n    const [emailError, setEmailError] = useState('');\r\n    const [passwordError, setPasswordError] = useState('');\r\n    const [passwordStrength, setPasswordStrength] = useState('');\r\n\r\n    // Funkce pro kontrolu e-mailu\r\n    const validateEmail = (value) => {\r\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n        if (!emailRegex.test(value)) {\r\n            setEmailError('Zadejte platnou e-mailovou adresu.');\r\n        } else {\r\n            setEmailError('');\r\n        }\r\n    };\r\n\r\n    // Funkce pro kontrolu hesla\r\n    const checkPassword = (value) => {\r\n        const hasUpperCase = /[A-Z]/.test(value);\r\n        const hasLowerCase = /[a-z]/.test(value);\r\n        const hasNumber = /[0-9]/.test(value);\r\n        const hasSpecialChar = /[!@#$%^&*]/.test(value);\r\n\r\n        const strength = hasUpperCase + hasLowerCase + hasNumber + hasSpecialChar;\r\n\r\n        if (strength === 4) {\r\n            setPasswordStrength('Silné heslo');\r\n            setPasswordError('');\r\n        } else if (strength === 3) {\r\n            setPasswordStrength('Středně silné heslo');\r\n            setPasswordError('');\r\n        } else {\r\n            setPasswordStrength('Slabé heslo');\r\n            setPasswordError('Heslo musí obsahovat velká i malá písmena, číslice a speciální znaky.');\r\n        }\r\n    };\r\n\r\n    // Při změně e-mailu\r\n    const handleEmailChange = (e) => {\r\n        const value = e.target.value;\r\n        setEmail(value);\r\n        validateEmail(value);\r\n    };\r\n\r\n    // Při změně hesla\r\n    const handlePasswordChange = (e) => {\r\n        const value = e.target.value;\r\n        setPassword(value);\r\n        checkPassword(value);\r\n    };\r\n\r\n    const handleSubmit = async (event) => {\r\n        event.preventDefault();\r\n\r\n        // Zkontrolovat, jestli jsou všechny validace úspěšné\r\n        if (emailError || passwordError) {\r\n            setError('Prosím, opravte chyby před přihlášením.');\r\n            return;\r\n        }\r\n        console.log('data' , {email,password})\r\n        try {\r\n            const response = await axios.post('http://localhost:5000/api/auth/login', {\r\n                email,\r\n                password,\r\n            });\r\n            console.log('response', {response, 'response.data': response.data});\r\n\r\n            setUserName(response.data.name);\r\n            setUserId(response.data.userId);\r\n            navigate('/dashboard');\r\n        } catch (err) {\r\n            const errorMessage = err.response ? err.response.data.message : \"Login failed\";\r\n            setError(errorMessage);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Container component=\"main\" maxWidth=\"xs\">\r\n            <Box\r\n                sx={{\r\n                    display: 'flex',\r\n                    flexDirection: 'column',\r\n                    alignItems: 'center',\r\n                    mt: 8,\r\n                    background: 'linear-gradient(135deg, #f0f0f0, #faf5f5)',\r\n                    boxShadow: '0px 8px 20px rgba(0, 0, 0, 0.15)',\r\n                    borderRadius: '16px',\r\n                    padding: '30px',\r\n                    maxWidth: '400px',\r\n                    margin: '50px auto',\r\n                }}\r\n            >\r\n                <Typography component=\"h1\" variant=\"h5\" sx={{ mb: 2 }}>\r\n                    Sign In\r\n                </Typography>\r\n                {error && <Typography color=\"error\" sx={{ mb: 2 }}>{error}</Typography>}\r\n                <Box component=\"form\" noValidate onSubmit={handleSubmit} sx={{ width: '100%' }}>\r\n                    <TextField\r\n                        margin=\"normal\"\r\n                        required\r\n                        fullWidth\r\n                        id=\"email\"\r\n                        label=\"Email Address\"\r\n                        name=\"email\"\r\n                        autoComplete=\"email\"\r\n                        autoFocus\r\n                        value={email}\r\n                        onChange={handleEmailChange}\r\n                        error={!!emailError}\r\n                        helperText={emailError}\r\n                        sx={{ backgroundColor: '#fff', borderRadius: '8px' }}\r\n                    />\r\n                    <TextField\r\n                        margin=\"normal\"\r\n                        required\r\n                        fullWidth\r\n                        name=\"password\"\r\n                        label=\"Password\"\r\n                        type=\"password\"\r\n                        id=\"password\"\r\n                        autoComplete=\"current-password\"\r\n                        value={password}\r\n                        onChange={handlePasswordChange}\r\n                        error={!!passwordError}\r\n                        helperText={passwordError || passwordStrength}\r\n                        sx={{ backgroundColor: '#fff', borderRadius: '8px' }}\r\n                    />\r\n                    <Button\r\n                        type=\"submit\"\r\n                        fullWidth\r\n                        variant=\"contained\"\r\n                        sx={{\r\n                            mt: 3,\r\n                            mb: 2,\r\n                            backgroundColor: '#1e90ff',\r\n                            color: '#fff',\r\n                            '&:hover': {\r\n                                backgroundColor: '#32cd32',\r\n                            },\r\n                        }}\r\n                    >\r\n                        Sign In\r\n                    </Button>\r\n                    <Button\r\n                        fullWidth\r\n                        variant=\"outlined\"\r\n                        sx={{\r\n                            mb: 2,\r\n                            borderColor: '#1e90ff',\r\n                            color: '#6200ea',\r\n                            '&:hover': {\r\n                                backgroundColor: '#f0f0f0',\r\n                                borderColor: '#32cd32',\r\n                                color: '#4500b5',\r\n                            },\r\n                        }}\r\n                        href=\"/register\"\r\n                    >\r\n                        Don't have an account? Register\r\n                    </Button>\r\n                </Box>\r\n            </Box>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}